(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{7706:function(e,t,i){Promise.resolve().then(i.bind(i,7680)),Promise.resolve().then(i.bind(i,2357)),Promise.resolve().then(i.bind(i,2579))},2579:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return TasksList}});var a=i(9),l=i(2265),n=i(8655);function AddTaskForm(e){let{onAddTask:t,onCancel:i}=e,[s,r]=(0,l.useState)(""),[d,o]=(0,l.useState)(0),[c,m]=(0,l.useState)(new Date().toISOString().split("T")[0]),[u,p]=(0,l.useState)(""),[h,g]=(0,l.useState)("medium"),[y,v]=(0,l.useState)(""),resetForm=()=>{r(""),o(0),m(new Date().toISOString().split("T")[0]),p(""),g("medium"),v("")};return(0,a.BX)("form",{onSubmit:e=>{if(e.preventDefault(),!s.trim()){v("יש להזין כותרת למשימה");return}if(0===d){v("יש לבחור אדם שהמשימה מיועדת אליו");return}if(!c){v("יש להזין תאריך יעד");return}t({id:0,title:s,assignedTo:d,dueDate:c,status:"pending",description:u,priority:h}),resetForm()},className:"space-y-4",children:[y&&(0,a.tZ)("div",{className:"p-3 bg-red-50 text-red-600 rounded-md text-sm font-medium",children:y}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"כותרת המשימה*"}),(0,a.tZ)("input",{type:"text",id:"title",value:s,onChange:e=>r(e.target.value),className:"input-field",placeholder:"הזן כותרת למשימה"})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"assignedTo",className:"block text-sm font-medium text-gray-700 mb-1",children:"מיועד ל*"}),(0,a.BX)("select",{id:"assignedTo",value:d,onChange:e=>o(Number(e.target.value)),className:"input-field",children:[(0,a.tZ)("option",{value:0,disabled:!0,children:"בחר מיועד"}),n.R7.members.map(e=>(0,a.tZ)("option",{value:e.id,children:e.firstName},e.id))]})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"תאריך יעד*"}),(0,a.tZ)("input",{type:"date",id:"dueDate",value:c,onChange:e=>m(e.target.value),className:"input-field",min:new Date().toISOString().split("T")[0]})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"תיאור המשימה"}),(0,a.tZ)("textarea",{id:"description",value:u,onChange:e=>p(e.target.value),className:"input-field min-h-[100px]",placeholder:"הזן תיאור מפורט של המשימה (לא חובה)"})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"עדיפות"}),(0,a.BX)("select",{id:"priority",value:h,onChange:e=>g(e.target.value),className:"input-field",children:[(0,a.tZ)("option",{value:"low",children:"נמוכה"}),(0,a.tZ)("option",{value:"medium",children:"בינונית"}),(0,a.tZ)("option",{value:"high",children:"גבוהה"})]})]}),(0,a.BX)("div",{className:"flex justify-end space-x-3 space-x-reverse",children:[(0,a.tZ)("button",{type:"button",onClick:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"ביטול"}),(0,a.tZ)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors",children:"הוספת משימה"})]})]})}var s=i(482),r=i(2219),d=i(7870);function TaskItem(e){let{task:t,onStatusChange:i,onDeleteTask:l}=e;return(0,a.BX)(d.E.div,{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:300,damping:30},whileHover:{y:-5,boxShadow:"0 10px 20px rgba(0,0,0,0.05)",transition:{duration:.2}},layout:!0,children:[(0,a.BX)("div",{className:"flex justify-between flex-wrap gap-2",children:[(0,a.tZ)(d.E.h3,{className:"text-lg font-medium text-gray-800",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:t.title}),(0,a.BX)("div",{className:"flex gap-2",children:[(0,a.tZ)(d.E.span,{className:"text-xs px-2 py-1 rounded-full ".concat("completed"===t.status?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),whileHover:{scale:1.1},whileTap:{scale:.95},children:"completed"===t.status?"הושלם":"ממתין"}),(0,a.tZ)(d.E.span,{className:"text-xs px-2 py-1 rounded-full ".concat((e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-amber-100 text-amber-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(t.priority)),whileHover:{scale:1.1},whileTap:{scale:.95},children:(e=>{switch(e){case"high":return"גבוהה";case"medium":return"בינונית";case"low":return"נמוכה";default:return"לא ידוע"}})(t.priority)})]})]}),(0,a.BX)(d.E.div,{className:"mt-2 text-sm text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[(0,a.BX)("p",{children:[(0,a.tZ)("span",{className:"font-medium",children:"מיועד ל: "}),(e=>{let t=n.R7.members.find(t=>t.id===e);return t?t.firstName:"לא ידוע"})(t.assignedTo)]}),(0,a.BX)("p",{className:"mt-1",children:[(0,a.tZ)("span",{className:"font-medium",children:"תאריך יעד: "}),(e=>{let t=new Date().toISOString().split("T")[0],i=new Date(new Date().setDate(new Date().getDate()+1)).toISOString().split("T")[0];if(e===t)return"היום";if(e===i)return"מחר";let a=new Date(e);return(0,s.Z)(a,"EEEE, d בMMMM",{locale:r.Z})})(t.dueDate)]}),t.description&&(0,a.tZ)(d.E.p,{className:"mt-2 text-gray-500 whitespace-pre-line",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{delay:.3},children:t.description})]}),(0,a.BX)(d.E.div,{className:"mt-4 flex justify-end gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:[(0,a.tZ)(d.E.button,{onClick:()=>i(t.id,"completed"===t.status?"pending":"completed"),className:"px-3 py-1 text-sm font-medium rounded-md bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"completed"===t.status?"סמן כממתין":"סמן כהושלם"}),(0,a.tZ)(d.E.button,{onClick:()=>l(t.id),className:"px-3 py-1 text-sm font-medium rounded-md bg-red-50 text-red-600 hover:bg-red-100 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"מחק"})]})]})}var o=i(2167);function TasksList(){let[e,t]=(0,l.useState)([]),[i,s]=(0,l.useState)("all"),[r,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)("all");(0,l.useEffect)(()=>{let e=n._e.map(e=>({...e,priority:e.priority,status:e.status}));t(e)},[]);let handleTaskStatusChange=(i,a)=>{t(e.map(e=>e.id===i?{...e,status:a}:e))},handleDeleteTask=i=>{t(e.filter(e=>e.id!==i))},p=e.filter(e=>{let t="all"===m||e.status===m,a="all"===i||e.assignedTo===i;return t&&a}),h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1,when:"beforeChildren",duration:.3}}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}},exit:{opacity:0,y:-20,transition:{duration:.2}}};return(0,a.BX)(d.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,a.BX)(d.E.div,{className:"flex flex-col md:flex-row md:justify-between mb-6 space-y-4 md:space-y-0",variants:h,initial:"hidden",animate:"visible",children:[(0,a.tZ)("div",{className:"flex space-x-4 space-x-reverse",children:(0,a.BX)(d.E.button,{onClick:()=>c(!r),className:"btn btn-primary flex items-center",variants:{hover:{scale:1.05},tap:{scale:.95}},whileHover:"hover",whileTap:"tap",children:[(0,a.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.tZ)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),r?"ביטול":"הוספת משימה"]})}),(0,a.BX)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4 md:space-x-reverse",children:[(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"statusFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"סטטוס"}),(0,a.BX)(d.E.select,{id:"statusFilter",className:"input-field",value:m,onChange:e=>u(e.target.value),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.tZ)("option",{value:"all",children:"הכל"}),(0,a.tZ)("option",{value:"pending",children:"ממתין"}),(0,a.tZ)("option",{value:"completed",children:"הושלם"})]})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"personFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"שייך ל"}),(0,a.BX)(d.E.select,{id:"personFilter",className:"input-field",value:i,onChange:e=>s("all"===e.target.value?"all":Number(e.target.value)),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.tZ)("option",{value:"all",children:"כל המשפחה"}),n.R7.members.map(e=>(0,a.tZ)("option",{value:e.id,children:e.firstName},e.id))]})]})]})]}),(0,a.tZ)(o.M,{mode:"wait",children:r&&(0,a.BX)(d.E.div,{className:"bg-white p-6 rounded-lg shadow-md mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{type:"spring",stiffness:300,damping:25},children:[(0,a.tZ)("h2",{className:"text-xl font-bold mb-4",children:"הוספת משימה חדשה"}),(0,a.tZ)(AddTaskForm,{onAddTask:i=>{let a={...i,id:e.length>0?Math.max(...e.map(e=>e.id))+1:1};t([...e,a]),c(!1)},onCancel:()=>c(!1)})]})}),(0,a.tZ)(o.M,{mode:"wait",children:p.length>0?(0,a.tZ)(d.E.div,{className:"grid gap-4",variants:h,initial:"hidden",animate:"visible",layout:!0,children:(0,a.tZ)(o.M,{children:p.map(e=>(0,a.tZ)(d.E.div,{layout:!0,variants:g,initial:"hidden",animate:"visible",exit:"exit",transition:{type:"spring",stiffness:300,damping:25},children:(0,a.tZ)(TaskItem,{task:e,onStatusChange:handleTaskStatusChange,onDeleteTask:handleDeleteTask})},e.id))})}):(0,a.tZ)(d.E.div,{className:"bg-white p-8 rounded-lg shadow text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:(0,a.tZ)(d.E.p,{className:"text-gray-500 text-lg",initial:{y:20},animate:{y:0},transition:{delay:.3,type:"spring",stiffness:200},children:"אין משימות התואמות את הסינון שבחרת"})})})]})}}},function(e){e.O(0,[901,450,71,31,971,472,744],function(){return e(e.s=7706)}),_N_E=e.O()}]);