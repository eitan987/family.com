(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{1529:function(e,t,a){Promise.resolve().then(a.bind(a,7680)),Promise.resolve().then(a.bind(a,4464)),Promise.resolve().then(a.bind(a,2357))},4464:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return FamilyCalendar}});var l=a(9),i=a(9738),r=a.n(i),n=a(2265),d=a(569),s=a(8655),c=a(482),m=a(9956),o=a(2219);function AddEventForm(e){let{onAddEvent:t,onCancel:a,initialDate:i}=e,r=(0,c.Z)(new Date,"yyyy-MM-dd"),d="09:00",m="10:00",o=(0,c.Z)(i,"yyyy-MM-dd"),[h,u]=(0,n.useState)(""),[g,p]=(0,n.useState)(""),[f,b]=(0,n.useState)(""),[v,x]=(0,n.useState)(o),[y,N]=(0,n.useState)(d),[Z,w]=(0,n.useState)(m),[k,B]=(0,n.useState)([]),[X,C]=(0,n.useState)("none"),[_,E]=(0,n.useState)(""),resetForm=()=>{u(""),p(""),b(""),x(o),N(d),w(m),B([]),C("none"),E("")},handleParticipantChange=e=>{B(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,l.BX)("form",{onSubmit:e=>{if(e.preventDefault(),!h.trim()){E("יש להזין כותרת לאירוע");return}if(!g.trim()){E("יש להזין מיקום לאירוע");return}if(!v){E("יש לבחור תאריך");return}if(!y||!Z){E("יש להזין שעת התחלה ושעת סיום");return}if(0===k.length){E("יש לבחור לפחות משתתף אחד");return}let a={id:0,title:h,startDate:"".concat(v,"T").concat(y,":00"),endDate:"".concat(v,"T").concat(Z,":00"),participants:k,location:g,description:f,repeat:X};t(a),resetForm()},className:"space-y-4",children:[_&&(0,l.tZ)("div",{className:"p-3 bg-red-50 text-red-600 rounded-md text-sm font-medium",children:_}),(0,l.BX)("div",{children:[(0,l.tZ)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"כותרת האירוע*"}),(0,l.tZ)("input",{type:"text",id:"title",value:h,onChange:e=>u(e.target.value),className:"input-field",placeholder:"הזן כותרת לאירוע"})]}),(0,l.BX)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.BX)("div",{children:[(0,l.tZ)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"תאריך*"}),(0,l.tZ)("input",{type:"date",id:"date",value:v,onChange:e=>x(e.target.value),className:"input-field",min:r})]}),(0,l.BX)("div",{children:[(0,l.tZ)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"מיקום*"}),(0,l.tZ)("input",{type:"text",id:"location",value:g,onChange:e=>p(e.target.value),className:"input-field",placeholder:"הזן מיקום"})]})]}),(0,l.BX)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.BX)("div",{children:[(0,l.tZ)("label",{htmlFor:"startTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"שעת התחלה*"}),(0,l.tZ)("input",{type:"time",id:"startTime",value:y,onChange:e=>N(e.target.value),className:"input-field"})]}),(0,l.BX)("div",{children:[(0,l.tZ)("label",{htmlFor:"endTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"שעת סיום*"}),(0,l.tZ)("input",{type:"time",id:"endTime",value:Z,onChange:e=>w(e.target.value),className:"input-field"})]})]}),(0,l.BX)("div",{children:[(0,l.tZ)("label",{htmlFor:"participants",className:"block text-sm font-medium text-gray-700 mb-1",children:"משתתפים*"}),(0,l.tZ)("div",{className:"grid grid-cols-2 gap-2",children:s.R7.members.map(e=>(0,l.BX)("div",{className:"flex items-center",children:[(0,l.tZ)("input",{type:"checkbox",id:"participant-".concat(e.id),checked:k.includes(e.id),onChange:()=>handleParticipantChange(e.id),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,l.tZ)("label",{htmlFor:"participant-".concat(e.id),className:"mr-2 block text-sm text-gray-700",children:e.firstName})]},e.id))})]}),(0,l.BX)("div",{children:[(0,l.tZ)("label",{htmlFor:"repeat",className:"block text-sm font-medium text-gray-700 mb-1",children:"חזרה"}),(0,l.BX)("select",{id:"repeat",value:X,onChange:e=>C(e.target.value),className:"input-field",children:[(0,l.tZ)("option",{value:"none",children:"ללא חזרה"}),(0,l.tZ)("option",{value:"daily",children:"יומי"}),(0,l.tZ)("option",{value:"weekly",children:"שבועי"}),(0,l.tZ)("option",{value:"monthly",children:"חודשי"}),(0,l.tZ)("option",{value:"yearly",children:"שנתי"})]})]}),(0,l.BX)("div",{children:[(0,l.tZ)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"תיאור האירוע"}),(0,l.tZ)("textarea",{id:"description",value:f,onChange:e=>b(e.target.value),className:"input-field min-h-[100px]",placeholder:"הזן תיאור מפורט של האירוע (לא חובה)"})]}),(0,l.BX)("div",{className:"flex justify-end space-x-3 space-x-reverse",children:[(0,l.tZ)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"ביטול"}),(0,l.tZ)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors",children:"הוספת אירוע"})]})]})}function EventDetails(e){let{event:t,onDelete:a}=e,formatEventTime=e=>{let t=new Date(e);return(0,c.Z)(t,"HH:mm",{locale:o.Z})},getMemberName=e=>{let t=s.R7.members.find(t=>t.id===e);return t?t.firstName:"לא ידוע"};return(0,l.BX)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,l.BX)("div",{className:"flex justify-between items-start mb-4",children:[(0,l.tZ)("h2",{className:"text-xl font-bold text-gray-800",children:t.title}),(0,l.tZ)("button",{onClick:()=>a(t.id),className:"text-red-500 hover:text-red-700 transition-colors","aria-label":"מחק אירוע",children:(0,l.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.tZ)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,l.BX)("div",{className:"space-y-4",children:[(0,l.BX)("div",{children:[(0,l.tZ)("h3",{className:"text-sm font-medium text-gray-500",children:"תאריך"}),(0,l.tZ)("p",{className:"mt-1 text-indigo-600 font-medium",children:(e=>{let t=new Date(e);return(0,c.Z)(t,"EEEE, d בMMMM yyyy",{locale:o.Z})})(t.startDate)})]}),(0,l.BX)("div",{children:[(0,l.tZ)("h3",{className:"text-sm font-medium text-gray-500",children:"שעות"}),(0,l.BX)("p",{className:"mt-1",children:[formatEventTime(t.startDate)," - ",formatEventTime(t.endDate)]})]}),(0,l.BX)("div",{children:[(0,l.tZ)("h3",{className:"text-sm font-medium text-gray-500",children:"מיקום"}),(0,l.tZ)("p",{className:"mt-1",children:t.location})]}),"none"!==t.repeat&&(0,l.BX)("div",{children:[(0,l.tZ)("h3",{className:"text-sm font-medium text-gray-500",children:"חזרה"}),(0,l.tZ)("p",{className:"mt-1",children:(e=>{switch(e){case"none":return"ללא חזרה";case"daily":return"יומי";case"weekly":return"שבועי";case"monthly":return"חודשי";case"yearly":return"שנתי";default:return"לא ידוע"}})(t.repeat)})]}),(0,l.BX)("div",{children:[(0,l.tZ)("h3",{className:"text-sm font-medium text-gray-500",children:"משתתפים"}),(0,l.tZ)("div",{className:"mt-1 flex flex-wrap gap-1",children:t.participants.map(e=>(0,l.tZ)("span",{className:"inline-block bg-gray-100 text-gray-800 text-sm px-2 py-1 rounded-full",children:getMemberName(e)},e))})]}),t.description&&(0,l.BX)("div",{children:[(0,l.tZ)("h3",{className:"text-sm font-medium text-gray-500",children:"תיאור"}),(0,l.tZ)("p",{className:"mt-1 text-gray-600 whitespace-pre-line",children:t.description})]})]})]})}function FamilyCalendar(){let[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(new Date),[h,u]=(0,n.useState)([]),[g,p]=(0,n.useState)(!1),[f,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=s.Kh.map(e=>({...e,repeat:e.repeat,category:e.category}));t(e)},[]),(0,n.useEffect)(()=>{let t=e.filter(e=>{let t=new Date(e.startDate);return(0,m.Z)(t,a)});u(t)},[a,e]);let handleEventClick=e=>{b(e)},getMemberName=e=>{let t=s.R7.members.find(t=>t.id===e);return t?t.firstName:"לא ידוע"};return(0,l.BX)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,l.BX)("div",{className:"lg:col-span-2",children:[(0,l.BX)("div",{className:"jsx-d5bdb114133f0641 bg-white p-4 rounded-lg shadow-md",children:[(0,l.tZ)(r(),{id:"d5bdb114133f0641",children:'.react-calendar{width:100%;border:none;font-family:"Rubik",sans-serif;direction:rtl}.react-calendar__navigation{-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:1rem}.react-calendar__month-view__weekdays__weekday abbr{text-decoration:none;font-weight:600}.react-calendar__tile{padding:1rem .5rem;position:relative}.react-calendar__tile:enabled:hover,.react-calendar__tile:enabled:focus{background-color:#e0e7ff;-webkit-border-radius:.25rem;-moz-border-radius:.25rem;border-radius:.25rem}.react-calendar__tile--active{background-color:#4f46e5!important;color:white;-webkit-border-radius:.25rem;-moz-border-radius:.25rem;border-radius:.25rem}.react-calendar__tile--now{background-color:#f3f4f6;-webkit-border-radius:.25rem;-moz-border-radius:.25rem;border-radius:.25rem}'}),(0,l.tZ)(d.ZP,{onChange:e=>{i(e),b(null)},value:a,locale:"he-IL",tileContent:t=>{let{date:a}=t,i=e.filter(e=>{let t=new Date(e.startDate);return(0,m.Z)(t,a)});return i.length>0?(0,l.BX)("div",{className:"flex flex-col items-center mt-1",children:[(0,l.tZ)("div",{className:"w-2 h-2 bg-indigo-600 rounded-full"}),i.length>1&&(0,l.tZ)("span",{className:"text-xs text-indigo-700 font-medium mt-0.5",children:i.length})]}):null}})]}),(0,l.BX)("div",{className:"mt-6 flex justify-between items-center",children:[(0,l.BX)("h2",{className:"text-xl font-semibold",children:["אירועים ביום ",(0,c.Z)(a,"EEEE, d בMMMM yyyy",{locale:o.Z})]}),(0,l.BX)("button",{onClick:()=>p(!g),className:"btn btn-primary flex items-center",children:[(0,l.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.tZ)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),g?"ביטול":"הוספת אירוע"]})]}),g&&(0,l.BX)("div",{className:"mt-4 bg-white p-6 rounded-lg shadow-md",children:[(0,l.tZ)("h3",{className:"text-lg font-bold mb-4",children:"הוספת אירוע חדש"}),(0,l.tZ)(AddEventForm,{onAddEvent:a=>{let l={...a,id:e.length>0?Math.max(...e.map(e=>e.id))+1:1};t([...e,l]),p(!1)},onCancel:()=>p(!1),initialDate:a})]}),h.length>0?(0,l.tZ)("div",{className:"mt-4 grid gap-4",children:h.map(e=>(0,l.BX)("div",{onClick:()=>handleEventClick(e),className:"p-4 rounded-lg border cursor-pointer transition-colors ".concat((null==f?void 0:f.id)===e.id?"bg-indigo-50 border-indigo-300":"bg-white border-gray-200 hover:bg-gray-50"),children:[(0,l.BX)("div",{className:"flex justify-between items-start",children:[(0,l.tZ)("h3",{className:"font-medium text-lg",children:e.title}),(0,l.BX)("div",{className:"text-sm text-indigo-600",children:[(0,c.Z)(new Date(e.startDate),"HH:mm")," - ",(0,c.Z)(new Date(e.endDate),"HH:mm")]})]}),(0,l.BX)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,l.tZ)("span",{className:"font-medium",children:"מיקום: "}),e.location]}),(0,l.tZ)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.participants.map(e=>(0,l.tZ)("span",{className:"inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full",children:getMemberName(e)},e))})]},e.id))}):(0,l.tZ)("div",{className:"mt-4 bg-white p-8 rounded-lg shadow text-center",children:(0,l.tZ)("p",{className:"text-gray-500 text-lg",children:"אין אירועים מתוכננים לתאריך זה"})})]}),(0,l.tZ)("div",{className:"lg:col-span-1",children:f?(0,l.tZ)(EventDetails,{event:f,onDelete:a=>{t(e.filter(e=>e.id!==a)),b(null)}}):(0,l.BX)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full flex flex-col justify-center items-center",children:[(0,l.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.tZ)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,l.tZ)("p",{className:"text-gray-500 text-lg text-center",children:"בחר אירוע כדי לצפות בפרטים נוספים"})]})})]})}a(8094)}},function(e){e.O(0,[901,450,71,764,31,971,472,744],function(){return e(e.s=1529)}),_N_E=e.O()}]);