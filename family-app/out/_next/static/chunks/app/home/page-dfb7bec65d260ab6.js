(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{4483:function(e,t,a){Promise.resolve().then(a.bind(a,7680)),Promise.resolve().then(a.bind(a,454)),Promise.resolve().then(a.bind(a,2357))},454:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return DashboardSummary}});var s=a(9),r=a(2265),l=a(1396),i=a.n(l),n=a(8655),c=a(482),m=a(2219);function DashboardSummary(){let[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)([]),[d,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{{let e=localStorage.getItem("currentUser");e&&t(JSON.parse(e));let a=new Date().toISOString().split("T")[0],s=n._e.filter(e=>e.dueDate===a||"2025-04-24"===e.dueDate),r=s.map(e=>({...e,priority:e.priority,status:e.status}));l(r);let i=n.Kh.filter(e=>{let t=new Date(e.startDate),a=new Date,s=Math.abs(t.getTime()-a.getTime());return 7>=Math.ceil(s/864e5)}),c=i.map(e=>({...e,repeat:e.repeat,category:e.category}));o(c)}},[]);let getMemberName=e=>{let t=n.R7.members.find(t=>t.id===e);return t?t.firstName:"לא ידוע"},formatEventDate=e=>{let t=new Date(e);return(0,c.Z)(t,"EEEE, d בMMMM 'בשעה' HH:mm",{locale:m.Z})};return(0,s.BX)("div",{children:[(0,s.tZ)("div",{className:"mb-8",children:(0,s.tZ)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:e?"שלום, ".concat(e.firstName):"ברוכים הבאים למשפחת "+n.R7.lastName})}),(0,s.BX)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.BX)("div",{className:"card",children:[(0,s.BX)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.tZ)("h2",{className:"section-title",children:"משימות להיום"}),(0,s.tZ)(i(),{href:"/tasks",className:"text-indigo-600 text-sm hover:underline",children:"כל המשימות"})]}),a.length>0?(0,s.tZ)("ul",{className:"space-y-3",children:a.map(e=>(0,s.BX)("li",{className:"p-3 bg-white border rounded-lg shadow-sm",children:[(0,s.BX)("div",{className:"flex justify-between",children:[(0,s.tZ)("h3",{className:"font-medium",children:e.title}),(0,s.tZ)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),children:"completed"===e.status?"הושלם":"ממתין"})]}),(0,s.BX)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,s.tZ)("span",{className:"font-medium",children:"מיועד ל: "}),getMemberName(e.assignedTo)]}),e.description&&(0,s.tZ)("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]},e.id))}):(0,s.tZ)("p",{className:"text-gray-500",children:"אין משימות מתוכננות להיום"})]}),(0,s.BX)("div",{className:"card",children:[(0,s.BX)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.tZ)("h2",{className:"section-title",children:"אירועים קרובים"}),(0,s.tZ)(i(),{href:"/calendar",className:"text-indigo-600 text-sm hover:underline",children:"היומן המלא"})]}),d.length>0?(0,s.tZ)("ul",{className:"space-y-3",children:d.map(e=>(0,s.BX)("li",{className:"p-3 bg-white border rounded-lg shadow-sm",children:[(0,s.tZ)("h3",{className:"font-medium",children:e.title}),(0,s.tZ)("p",{className:"text-sm text-indigo-600 mt-1",children:formatEventDate(e.startDate)}),(0,s.BX)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,s.tZ)("span",{className:"font-medium",children:"מיקום: "}),e.location]}),(0,s.tZ)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.participants.map(e=>(0,s.tZ)("span",{className:"inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full",children:getMemberName(e)},e))})]},e.id))}):(0,s.tZ)("p",{className:"text-gray-500",children:"אין אירועים מתוכננים לשבוע הקרוב"})]})]})]})}}},function(e){e.O(0,[901,450,71,31,971,472,744],function(){return e(e.s=4483)}),_N_E=e.O()}]);