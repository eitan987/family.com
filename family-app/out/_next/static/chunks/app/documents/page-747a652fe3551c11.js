(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{9126:function(e,t,l){Promise.resolve().then(l.bind(l,7680)),Promise.resolve().then(l.bind(l,270)),Promise.resolve().then(l.bind(l,2357))},270:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return DocumentsManager}});var a=l(9),i=l(2265),n=l(8655),r=l(482),d=l(2219);function DocumentItem(e){let{document:t,isSelected:l,onDocumentClick:i,onDeleteDocument:n,getMemberName:r,getDocumentTypeLabel:d,formatDate:o}=e;return(0,a.BX)("div",{className:"p-4 rounded-lg border cursor-pointer transition-colors ".concat(l?"bg-indigo-50 border-indigo-300":"bg-white border-gray-200 hover:bg-gray-50"),onClick:()=>i(t),children:[(0,a.BX)("div",{className:"flex justify-between items-start",children:[(0,a.BX)("div",{className:"flex items-start",children:[(0,a.tZ)("div",{className:"flex-shrink-0",children:(e=>{switch(e){case"pdf":return(0,a.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.tZ)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})});case"image":return(0,a.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.tZ)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})});case"doc":return(0,a.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.tZ)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})});default:return(0,a.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.tZ)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}})(t.type)}),(0,a.BX)("div",{className:"mr-3",children:[(0,a.tZ)("h3",{className:"font-medium",children:t.title}),(0,a.BX)("p",{className:"text-sm text-gray-500",children:[(0,a.tZ)("span",{className:"font-medium",children:"שייך ל: "}),r(t.memberId)]})]})]}),(0,a.tZ)("div",{className:"flex-shrink-0",children:(0,a.tZ)("span",{className:"inline-block bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full",children:d(t.type)})})]}),(0,a.BX)("div",{className:"mt-3 space-y-2",children:[(0,a.BX)("p",{className:"text-xs text-gray-500",children:[(0,a.tZ)("span",{className:"font-medium",children:"תאריך העלאה: "}),o(t.uploadDate)]}),t.tags.length>0&&(0,a.tZ)("div",{className:"flex flex-wrap gap-1 mt-2",children:t.tags.map((e,t)=>(0,a.tZ)("span",{className:"inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full",children:e},t))})]}),(0,a.BX)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,a.tZ)("button",{onClick:e=>{e.stopPropagation(),alert("פתיחת מסמך: "+t.title)},className:"px-3 py-1 text-sm font-medium rounded-md bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors",children:"צפייה"}),(0,a.tZ)("button",{onClick:e=>{e.stopPropagation(),window.confirm("האם אתה בטוח שברצונך למחוק מסמך זה?")&&n(t.id)},className:"px-3 py-1 text-sm font-medium rounded-md bg-red-50 text-red-600 hover:bg-red-100 transition-colors",children:"מחיקה"})]})]})}function UploadDocumentForm(e){let{onAddDocument:t,onCancel:l}=e,[r,d]=(0,i.useState)(""),[o,s]=(0,i.useState)(0),[c,m]=(0,i.useState)("pdf"),[u,h]=(0,i.useState)(""),[g,p]=(0,i.useState)(null),[f,b]=(0,i.useState)(""),resetForm=()=>{d(""),s(0),m("pdf"),h(""),p(null),b("")};return(0,a.BX)("form",{onSubmit:e=>{if(e.preventDefault(),!r.trim()){b("יש להזין כותרת למסמך");return}if(0===o){b("יש לבחור אדם שאליו שייך המסמך");return}if(!g){b("יש לבחור קובץ להעלאה");return}let l=u.split(",").map(e=>e.trim()).filter(e=>e.length>0),a="/documents/"+g.name.replace(/\s+/g,"_"),i={id:0,title:r,memberId:o,type:"other"===c?"doc":c,uploadDate:new Date().toISOString().split("T")[0],url:a,uploadedBy:o,tags:l};t(i),resetForm()},className:"space-y-4",children:[f&&(0,a.tZ)("div",{className:"p-3 bg-red-50 text-red-600 rounded-md text-sm font-medium",children:f}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"כותרת המסמך*"}),(0,a.tZ)("input",{type:"text",id:"title",value:r,onChange:e=>d(e.target.value),className:"input-field",placeholder:"תעודת לידה, תעודת זהות, וכו'"})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"memberId",className:"block text-sm font-medium text-gray-700 mb-1",children:"שייך ל*"}),(0,a.BX)("select",{id:"memberId",value:o,onChange:e=>s(Number(e.target.value)),className:"input-field",children:[(0,a.tZ)("option",{value:0,disabled:!0,children:"בחר אדם"}),n.R7.members.map(e=>(0,a.tZ)("option",{value:e.id,children:e.firstName},e.id))]})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"סוג מסמך*"}),(0,a.BX)("select",{id:"type",value:c,onChange:e=>m(e.target.value),className:"input-field",children:[(0,a.tZ)("option",{value:"pdf",children:"PDF"}),(0,a.tZ)("option",{value:"image",children:"תמונה"}),(0,a.tZ)("option",{value:"doc",children:"מסמך Word"}),(0,a.tZ)("option",{value:"other",children:"אחר"})]})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700 mb-1",children:"בחר קובץ*"}),(0,a.tZ)("input",{type:"file",id:"file",onChange:e=>{e.target.files&&e.target.files.length>0&&p(e.target.files[0])},className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),g&&(0,a.BX)("p",{className:"mt-1 text-sm text-gray-500",children:["נבחר: ",g.name]})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:"תגיות (הפרדה בפסיקים)"}),(0,a.tZ)("input",{type:"text",id:"tags",value:u,onChange:e=>h(e.target.value),className:"input-field",placeholder:"מסמכים רשמיים, בית ספר, וכו'"})]}),(0,a.BX)("div",{className:"flex justify-end space-x-3 space-x-reverse",children:[(0,a.tZ)("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"ביטול"}),(0,a.tZ)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors",children:"העלאה"})]})]})}function DocumentsManager(){let[e,t]=(0,i.useState)([]),[l,o]=(0,i.useState)("all"),[s,c]=(0,i.useState)("all"),[m,u]=(0,i.useState)(""),[h,g]=(0,i.useState)(!1),[p,f]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=n.mk.map(e=>({...e,type:e.type}));t(e)},[]);let handleDeleteDocument=l=>{t(e.filter(e=>e.id!==l)),(null==p?void 0:p.id)===l&&f(null)},handleDocumentClick=e=>{f(e===p?null:e)},b=e.filter(e=>{let t="all"===l||e.memberId===l,a="all"===s||e.type===s,i=""===m||e.title.toLowerCase().includes(m.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(m.toLowerCase()));return t&&a&&i}),getMemberName=e=>{let t=n.R7.members.find(t=>t.id===e);return t?t.firstName:"לא ידוע"},getDocumentTypeLabel=e=>{switch(e){case"pdf":return"מסמך PDF";case"image":return"תמונה";case"doc":return"מסמך Word";default:return"קובץ אחר"}},formatDate=e=>{let t=new Date(e);return(0,r.Z)(t,"d בMMMM yyyy",{locale:d.Z})};return(0,a.BX)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.BX)("div",{className:"lg:col-span-1",children:[(0,a.BX)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,a.tZ)("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"סינון מסמכים"}),(0,a.BX)("div",{className:"space-y-4",children:[(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"searchQuery",className:"block text-sm font-medium text-gray-700 mb-1",children:"חיפוש"}),(0,a.tZ)("input",{type:"text",id:"searchQuery",value:m,onChange:e=>u(e.target.value),className:"input-field",placeholder:"חפש לפי כותרת או תגיות..."})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"filterByMember",className:"block text-sm font-medium text-gray-700 mb-1",children:"שייך ל"}),(0,a.BX)("select",{id:"filterByMember",value:l,onChange:e=>o("all"===e.target.value?"all":Number(e.target.value)),className:"input-field",children:[(0,a.tZ)("option",{value:"all",children:"כל בני המשפחה"}),n.R7.members.map(e=>(0,a.tZ)("option",{value:e.id,children:e.firstName},e.id))]})]}),(0,a.BX)("div",{children:[(0,a.tZ)("label",{htmlFor:"filterByType",className:"block text-sm font-medium text-gray-700 mb-1",children:"סוג מסמך"}),(0,a.BX)("select",{id:"filterByType",value:s,onChange:e=>c(e.target.value),className:"input-field",children:[(0,a.tZ)("option",{value:"all",children:"כל הסוגים"}),(0,a.tZ)("option",{value:"pdf",children:"PDF"}),(0,a.tZ)("option",{value:"image",children:"תמונה"}),(0,a.tZ)("option",{value:"doc",children:"מסמך Word"}),(0,a.tZ)("option",{value:"other",children:"אחר"})]})]}),(0,a.BX)("button",{onClick:()=>g(!h),className:"w-full btn btn-primary flex items-center justify-center",children:[(0,a.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.tZ)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),h?"ביטול":"העלאת מסמך חדש"]})]})]}),h&&(0,a.BX)("div",{className:"mt-4 bg-white p-4 rounded-lg shadow-md",children:[(0,a.tZ)("h2",{className:"text-lg font-bold mb-4",children:"העלאת מסמך חדש"}),(0,a.tZ)(UploadDocumentForm,{onAddDocument:l=>{let a={...l,id:e.length>0?Math.max(...e.map(e=>e.id))+1:1};t([...e,a]),g(!1)},onCancel:()=>g(!1)})]})]}),(0,a.tZ)("div",{className:"lg:col-span-2",children:b.length>0?(0,a.tZ)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map(e=>(0,a.tZ)(DocumentItem,{document:e,isSelected:(null==p?void 0:p.id)===e.id,onDocumentClick:handleDocumentClick,onDeleteDocument:handleDeleteDocument,getMemberName:getMemberName,getDocumentTypeLabel:getDocumentTypeLabel,formatDate:formatDate},e.id))}):(0,a.tZ)("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:(0,a.tZ)("p",{className:"text-gray-500 text-lg",children:"אין מסמכים התואמים את הסינון שבחרת"})})})]})}}},function(e){e.O(0,[901,450,71,31,971,472,744],function(){return e(e.s=9126)}),_N_E=e.O()}]);