"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{7680:function(e,t,a){a.r(t),a.d(t,{default:function(){return ClientAuthCheck}});var i=a(9),r=a(2265),n=a(4033),o=a(7870);function ClientAuthCheck(){let e=(0,n.useRouter)(),[t,a]=(0,r.useState)(null);return((0,r.useEffect)(()=>{{let t=localStorage.getItem("currentUser");a(!!t),t||"/"===window.location.pathname||(console.log("User not authenticated, redirecting to home page"),e.push("/"))}},[e]),null===t)?null:(0,i.tZ)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}})}},2357:function(e,t,a){a.r(t),a.d(t,{default:function(){return Navbar}});var i=a(9),r=a(2265),n=a(1396),o=a.n(n),l=a(4033),s=a(8655),d=a(7870),c=a(2167),u=a(6454);function Navbar(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),[a,n]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{{let e=localStorage.getItem("currentUser");e&&n(JSON.parse(e))}},[]);let toggleMenu=()=>{m(!h)},handleLogout=async()=>{p(!0);try{await u.kv.logout(),t.push("/")}catch(e){console.error("Error during logout:",e),localStorage.removeItem("currentUser"),localStorage.removeItem("token"),t.push("/")}finally{p(!1)}},f=[{href:"/home",label:"בית"},{href:"/tasks",label:"משימות"},{href:"/calendar",label:"יומן משפחתי"},{href:"/personal",label:"פרטים אישיים"},{href:"/documents",label:"מסמכים"}],y={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24,staggerChildren:.1,when:"beforeChildren"}}},b={hidden:{opacity:0,y:-10},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}},hover:{scale:1.05}};return(0,i.tZ)(d.E.nav,{className:"bg-white shadow-md",variants:y,initial:"hidden",animate:"visible",children:(0,i.BX)("div",{className:"container mx-auto px-4",children:[(0,i.BX)("div",{className:"flex justify-between h-16",children:[(0,i.tZ)(d.E.div,{className:"flex items-center",variants:b,children:(0,i.tZ)("div",{className:"flex-shrink-0 flex items-center",children:(0,i.BX)(d.E.span,{className:"text-xl font-bold text-indigo-600",whileHover:{scale:1.05},whileTap:{scale:.95},children:["משפחת ",s.R7.lastName]})})}),(0,i.tZ)("div",{className:"hidden md:flex items-center space-x-4 space-x-reverse",children:f.map(t=>(0,i.tZ)(d.E.div,{variants:b,whileHover:"hover",children:(0,i.tZ)(o(),{href:t.href,className:"px-3 py-2 rounded-md text-sm font-medium ".concat(e===t.href?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:t.label})},t.href))}),(0,i.BX)("div",{className:"flex items-center",children:[a&&(0,i.BX)("div",{className:"flex items-center ml-4 relative",children:[(0,i.BX)(d.E.button,{onClick:toggleMenu,className:"flex items-center text-sm rounded-full focus:outline-none",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,i.tZ)("span",{className:"ml-2 text-gray-700",children:a.firstName}),(0,i.tZ)(d.E.div,{className:"h-8 w-8 rounded-full bg-indigo-200 flex items-center justify-center text-indigo-700",whileHover:{scale:1.1,backgroundColor:"#c7d2fe"},children:a.firstName.charAt(0)})]}),(0,i.tZ)(c.M,{children:h&&(0,i.tZ)(d.E.div,{className:"absolute left-0 top-10 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",variants:{hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:24}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},initial:"hidden",animate:"visible",exit:"exit",children:(0,i.tZ)(d.E.button,{onClick:handleLogout,className:"block w-full text-right px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",whileHover:{backgroundColor:"#f3f4f6"},disabled:g,children:g?"מתנתק...":"התנתקות"})})})]}),(0,i.tZ)("div",{className:"md:hidden flex items-center",children:(0,i.tZ)(d.E.button,{onClick:toggleMenu,className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-indigo-500 hover:bg-gray-100 focus:outline-none",whileHover:{scale:1.1},whileTap:{scale:.9,rotate:180},children:(0,i.tZ)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h?(0,i.tZ)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,i.tZ)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})]}),(0,i.tZ)(c.M,{children:h&&(0,i.tZ)(d.E.div,{className:"md:hidden",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,i.BX)(d.E.div,{className:"pt-2 pb-3 space-y-1",variants:y,initial:"hidden",animate:"visible",children:[f.map(t=>(0,i.tZ)(d.E.div,{variants:b,children:(0,i.tZ)(o(),{href:t.href,className:"block px-3 py-2 rounded-md text-base font-medium ".concat(e===t.href?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:t.label})},t.href)),(0,i.tZ)(d.E.button,{onClick:handleLogout,className:"block w-full text-right px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100",variants:b,whileHover:{backgroundColor:"#f3f4f6"},disabled:g,children:g?"מתנתק...":"התנתקות"})]})})})]})})}},8655:function(e,t,a){a.d(t,{Kh:function(){return n},R7:function(){return i},_e:function(){return r},mk:function(){return o}});let getFormattedDate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date;return t.setDate(t.getDate()+e),t.toISOString().split("T")[0]},getTodayDateTime=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new Date;return i.setDate(i.getDate()+e),i.setHours(t,a,0,0),i.toISOString()},i={lastName:"ישראלי",members:[{id:1,firstName:"דן",lastName:"ישראלי",role:"הורה",birthDate:"1980-05-15",email:"dan@family.com",phone:"054-1234567",hobbies:["ספורט","קריאה","מחשבים"]},{id:2,firstName:"דנה",lastName:"ישראלי",role:"הורה",birthDate:"1982-08-22",email:"dana@family.com",phone:"054-7654321",hobbies:["אפייה","גינון","מוזיקה"]},{id:3,firstName:"דני",lastName:"ישראלי",role:"ילד",birthDate:"2010-02-10",hobbies:["משחקי וידאו","כדורגל","לגו"]},{id:4,firstName:"שירה",lastName:"ישראלי",role:"ילדה",birthDate:"2012-11-05",hobbies:["ציור","ריקוד","קריאה"]}]},r=[{id:1,title:"לקנות מצרכים",description:"חלב, לחם, ביצים, ירקות ופירות",assignedTo:1,createdBy:2,dueDate:getFormattedDate(0),priority:"high",status:"pending"},{id:2,title:"הכנת שיעורי בית",description:"לעזור לדני בהכנת שיעורי הבית במתמטיקה",assignedTo:2,createdBy:2,dueDate:getFormattedDate(0),priority:"medium",status:"completed"},{id:3,title:"הרשמה לחוג",description:'להרשים את שירה לחוג ציור במתנ"ס',assignedTo:1,createdBy:2,dueDate:getFormattedDate(2),priority:"low",status:"pending"},{id:4,title:"תיקון ברז",description:"להזמין שרברב לתיקון הברז במטבח",assignedTo:1,createdBy:1,dueDate:getFormattedDate(1),priority:"high",status:"pending"},{id:5,title:"לסדר את החדר",description:"לסדר ולנקות את החדר",assignedTo:3,createdBy:1,dueDate:getFormattedDate(0),priority:"medium",status:"pending"}],n=[{id:1,title:"יום הולדת לסבא",description:"חגיגת יום הולדת לסבא בביתו",startDate:getTodayDateTime(2,18),endDate:getTodayDateTime(2,21),location:"בית סבא, רחוב הפרחים 10",participants:[1,2,3,4],repeat:"yearly",category:"family"},{id:2,title:"אסיפת הורים",description:"אסיפת הורים בבית הספר של דני",startDate:getTodayDateTime(4,19),endDate:getTodayDateTime(4,20,30),location:'בית ספר "אורנים", כיתה ג\'2',participants:[1,2],repeat:"none",category:"school"},{id:3,title:"חוג ציור",description:"חוג ציור של שירה",startDate:getTodayDateTime(1,16),endDate:getTodayDateTime(1,17,30),location:'מתנ"ס שכונתי',participants:[2,4],repeat:"weekly",category:"other"},{id:4,title:"משחק כדורגל",description:"משחק כדורגל של דני",startDate:getTodayDateTime(3,9),endDate:getTodayDateTime(3,11),location:"מגרש העירוני",participants:[1,3],repeat:"weekly",category:"other"}],o=[{id:1,title:"תעודת זהות",memberId:1,type:"image",url:"/documents/id.jpg",uploadDate:"2025-01-15",uploadedBy:1,tags:["מסמכים רשמיים","תעודות"]},{id:2,title:"תעודת לידה",memberId:3,type:"pdf",url:"/documents/birth_certificate.pdf",uploadDate:"2025-02-10",uploadedBy:2,tags:["מסמכים רשמיים","תעודות"]},{id:3,title:"תעודת בית ספר",memberId:3,type:"pdf",url:"/documents/school_certificate.pdf",uploadDate:"2025-03-20",uploadedBy:1,tags:["בית ספר","תעודות"]},{id:4,title:"ציור משפחה",memberId:4,type:"image",url:"/documents/family_drawing.jpg",uploadDate:"2025-04-01",uploadedBy:2,tags:["ציורים","אמנות"]}]},6454:function(e,t,a){a.d(t,{kv:function(){return n}});var i=a(4829);let r=i.Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"},withCredentials:!0});r.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e));let n={login:async(e,t)=>{try{let a=await r.post("/auth/login",{email:e,password:t});return a.data.token&&(localStorage.setItem("token",a.data.token),localStorage.setItem("currentUser",JSON.stringify(a.data.user))),a.data}catch(e){throw console.error("שגיאה בהתחברות:",e),e}},logout:async()=>{try{return await r.get("/auth/logout"),localStorage.removeItem("token"),localStorage.removeItem("currentUser"),{success:!0}}catch(e){throw console.error("שגיאה בהתנתקות:",e),e}},getCurrentUser:async()=>{try{let e=await r.get("/auth/me");return e.data}catch(e){throw console.error("שגיאה בקבלת פרטי משתמש:",e),e}},updateUserDetails:async e=>{try{let t=await r.put("/auth/updatedetails",e);return t.data.user&&localStorage.setItem("currentUser",JSON.stringify(t.data.user)),t.data}catch(e){throw console.error("שגיאה בעדכון פרטי משתמש:",e),e}},updatePassword:async(e,t)=>{try{let a=await r.put("/auth/updatepassword",{currentPassword:e,newPassword:t});return a.data}catch(e){throw console.error("שגיאה בשינוי סיסמה:",e),e}}}}}]);