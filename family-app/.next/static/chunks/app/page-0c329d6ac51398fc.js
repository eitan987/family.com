(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2773:function(e,t,r){Promise.resolve().then(r.bind(r,7650)),Promise.resolve().then(r.bind(r,5480))},7650:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return LoginForm}});var a=r(9),o=r(2265),n=r(1396),i=r.n(n),s=r(4033),l=r(7870),c=r(6454);function LoginForm(){let e=(0,s.useRouter)(),[t,r]=(0,o.useState)({email:"dan@family.com",password:"1234",rememberMe:!1}),[n,d]=(0,o.useState)(""),[u,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(()=>{{let t=localStorage.getItem("currentUser");t&&(console.log("User already logged in, redirecting to home page"),e.push("/home"))}})()},[e]);let handleChange=e=>{let{name:t,value:a,type:o,checked:n}=e.target;r(e=>({...e,[t]:"checkbox"===o?n:a}))},handleSubmit=async r=>{r.preventDefault(),m(!0),d("");try{await c.kv.login(t.email,t.password),console.log("Login successful, redirecting to home page"),t.rememberMe,setTimeout(()=>{e.push("/home")},500)}catch(e){var a;console.error("Login error:",e),(null===(a=e.message)||void 0===a?void 0:a.includes("Network Error"))?d("לא הצלחנו להתחבר לשרת. נסה שוב מאוחר יותר."):d("שם משתמש או סיסמה שגויים"),m(!1)}},h={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{type:"spring",stiffness:300,damping:24}}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}},hover:{scale:1.05},tap:{scale:.95}};return(0,a.BX)(l.E.form,{onSubmit:handleSubmit,className:"space-y-6",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,staggerChildren:.1,when:"beforeChildren"}}},initial:"hidden",animate:"visible",children:[(0,a.BX)(l.E.div,{variants:h,children:[(0,a.tZ)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"כתובת אימייל"}),(0,a.tZ)("div",{className:"mt-1",children:(0,a.tZ)(l.E.input,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t.email,onChange:handleChange,className:"input-field",placeholder:"הזן את כתובת האימייל שלך",dir:"ltr",whileFocus:{scale:1.01,borderColor:"#4f46e5"}})})]}),(0,a.BX)(l.E.div,{variants:h,children:[(0,a.tZ)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"סיסמה"}),(0,a.tZ)("div",{className:"mt-1",children:(0,a.tZ)(l.E.input,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t.password,onChange:handleChange,className:"input-field",placeholder:"הזן את הסיסמה שלך",dir:"ltr",whileFocus:{scale:1.01,borderColor:"#4f46e5"}})})]}),(0,a.BX)(l.E.div,{className:"flex items-center justify-between",variants:h,children:[(0,a.BX)("div",{className:"flex items-center",children:[(0,a.tZ)("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:t.rememberMe,onChange:handleChange,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,a.tZ)("label",{htmlFor:"rememberMe",className:"mr-2 block text-sm text-gray-700",children:"זכור אותי"})]}),(0,a.tZ)("div",{className:"text-sm",children:(0,a.tZ)(i(),{href:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:"שכחת סיסמה?"})})]}),n&&(0,a.tZ)(l.E.div,{className:"bg-red-50 text-red-500 p-3 rounded-md text-sm font-medium",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring"},children:n}),(0,a.tZ)(l.E.div,{variants:g,children:(0,a.tZ)(l.E.button,{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",variants:g,whileHover:"hover",whileTap:"tap",disabled:u,children:u?"מעבר...":"התחברות"})}),(0,a.tZ)(l.E.div,{className:"text-center text-sm text-gray-500 mt-4",variants:h,children:(0,a.BX)("p",{children:["למטרות הדגמה: השתמש באימייל"," ",(0,a.tZ)(l.E.span,{className:"text-indigo-600 font-medium",whileHover:{scale:1.05},children:"dan@family.com"})," ","וסיסמה כלשהי (לפחות 4 תווים)"]})})]})}},5480:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return DebugInfo}});var a=r(2265);function DebugInfo(){return(0,a.useEffect)(()=>{console.log("Debug info: Application loaded successfully"),console.log("Current URL:",window.location.href),console.log("Hostname:",window.location.hostname),console.log("Port:",window.location.port),console.log("Protocol:",window.location.protocol)},[]),null}},6454:function(e,t,r){"use strict";r.d(t,{kv:function(){return n}});var a=r(4829);let o=a.Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"},withCredentials:!0});o.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e));let n={login:async(e,t)=>{try{let r=await o.post("/auth/login",{email:e,password:t});return r.data.token&&(localStorage.setItem("token",r.data.token),localStorage.setItem("currentUser",JSON.stringify(r.data.user))),r.data}catch(e){throw console.error("שגיאה בהתחברות:",e),e}},logout:async()=>{try{return await o.get("/auth/logout"),localStorage.removeItem("token"),localStorage.removeItem("currentUser"),{success:!0}}catch(e){throw console.error("שגיאה בהתנתקות:",e),e}},getCurrentUser:async()=>{try{let e=await o.get("/auth/me");return e.data}catch(e){throw console.error("שגיאה בקבלת פרטי משתמש:",e),e}},updateUserDetails:async e=>{try{let t=await o.put("/auth/updatedetails",e);return t.data.user&&localStorage.setItem("currentUser",JSON.stringify(t.data.user)),t.data}catch(e){throw console.error("שגיאה בעדכון פרטי משתמש:",e),e}},updatePassword:async(e,t)=>{try{let r=await o.put("/auth/updatepassword",{currentPassword:e,newPassword:t});return r.data}catch(e){throw console.error("שגיאה בשינוי סיסמה:",e),e}}}}},function(e){e.O(0,[901,450,971,472,744],function(){return e(e.s=2773)}),_N_E=e.O()}]);